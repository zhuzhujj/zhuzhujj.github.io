{
    "version": "https://jsonfeed.org/version/1",
    "title": "zhuZhu • All posts by \"nodejs\" category",
    "description": "",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/2023/08/21/egg-js%E7%AC%94%E8%AE%B0/",
            "url": "http://example.com/2023/08/21/egg-js%E7%AC%94%E8%AE%B0/",
            "title": "egg.js笔记",
            "date_published": "2023-08-21T11:27:14.000Z",
            "content_html": "<h2 id=\"1-基本使用\"><a href=\"#1-基本使用\" class=\"headerlink\" title=\"1.基本使用\"></a>1.基本使用</h2><a id=\"more\"></a>\n\n<blockquote>\n<p>在app/controller/**.js 中编写逻辑，  在app/router.js中注册</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x27;use strict&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">const &#123; Controller &#125; = require(&#x27;egg&#x27;);</span><br><span class=\"line\"></span><br><span class=\"line\">class HomeController extends Controller &#123;</span><br><span class=\"line\">  async index() &#123;</span><br><span class=\"line\">    const &#123; ctx &#125; = this;</span><br><span class=\"line\">    ctx.body = &#x27;hi！！&#x27;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  async sayMin() &#123;</span><br><span class=\"line\">    const &#123; ctx &#125; = this;</span><br><span class=\"line\">    ctx.body = &#x27;hi！！&#x27;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">module.exports = HomeController;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>注册</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x27;use strict&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">/**</span><br><span class=\"line\"> * @param &#123;Egg.Application&#125; app - egg application</span><br><span class=\"line\"> */</span><br><span class=\"line\">module.exports = app =&gt; &#123;</span><br><span class=\"line\">  const &#123; router, controller &#125; = app;</span><br><span class=\"line\">  router.get(&#x27;/&#x27;, controller.home.index);</span><br><span class=\"line\">  router.get(&#x27;/my&#x27;, controller.home.sayMin);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"2-get-post-传参\"><a href=\"#2-get-post-传参\" class=\"headerlink\" title=\"2.get post 传参\"></a>2.get post 传参</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// get自由传参</span><br><span class=\"line\">  async index2 () &#123;</span><br><span class=\"line\">    const &#123; ctx &#125; = this;</span><br><span class=\"line\">    ctx.body = ctx.query</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  // get固定参数</span><br><span class=\"line\">  async index3 () &#123;</span><br><span class=\"line\">    const &#123; ctx &#125; = this;</span><br><span class=\"line\">    ctx.body = ctx.params</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  // post</span><br><span class=\"line\">  async index4 () &#123;</span><br><span class=\"line\">    const &#123; ctx &#125; = this;</span><br><span class=\"line\">    ctx.body = &#123;</span><br><span class=\"line\">      state: 200,</span><br><span class=\"line\">      data: ctx.request.body</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>router.js 注册</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">router.get(&#x27;/mine2&#x27;, controller.mine.index2);</span><br><span class=\"line\">router.get(&#x27;/mine3/:name/:age&#x27;, controller.mine.index3);</span><br><span class=\"line\">router.post(&#x27;/mine4&#x27;, controller.mine.index4);</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"3-service使用\"><a href=\"#3-service使用\" class=\"headerlink\" title=\"3.service使用\"></a>3.service使用</h2><blockquote>\n<p>用于编写业务逻辑层, 一般数据库操作</p>\n</blockquote>\n<p>app/service/***.js</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x27;use strict&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">const Service = require(&quot;egg&quot;).Service</span><br><span class=\"line\"></span><br><span class=\"line\">class Mine extends Service &#123;</span><br><span class=\"line\">  async geta (id) &#123;</span><br><span class=\"line\">    return &#123;</span><br><span class=\"line\">      id: id,</span><br><span class=\"line\">      // 模拟数据库返回结果</span><br><span class=\"line\">      name: &#x27;jake&#x27;,</span><br><span class=\"line\">      age: 18</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">module.exports = Mine</span><br></pre></td></tr></table></figure>\n\n<p>app/controller/ ***.js使用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// servies</span><br><span class=\"line\">async index5 () &#123;</span><br><span class=\"line\">  const &#123; ctx &#125; = this;</span><br><span class=\"line\">  const res = await ctx.service.mine.geta(&#x27;255&#x27;)</span><br><span class=\"line\">  ctx.body = res</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>app/router.js注册</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">router.get(&#x27;/mine5&#x27;, controller.mine.index5);</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"4-EJS模板引擎\"><a href=\"#4-EJS模板引擎\" class=\"headerlink\" title=\"4. EJS模板引擎\"></a>4. EJS模板引擎</h2><blockquote>\n<p>对 SEO 非常友好</p>\n<p>SPA实现不了的某些内容 模板引擎可以</p>\n</blockquote>\n<ol>\n<li>安装</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i egg-view-ejs --save</span><br></pre></td></tr></table></figure>\n\n<p>2.配置</p>\n<p>cofig/plugin.js</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x27;use strict&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">exports.ejs = &#123;</span><br><span class=\"line\">  // 开启</span><br><span class=\"line\">  enable: true,</span><br><span class=\"line\">  // 目录</span><br><span class=\"line\">  package: &quot;egg-view-ejs&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>config/config.default.js</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">//ejs配置</span><br><span class=\"line\">config.view = &#123;</span><br><span class=\"line\">  mapping: &#123;</span><br><span class=\"line\">    &quot;.html&quot;: &quot;ejs&quot;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">config.ejs = &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>3.使用</p>\n<blockquote>\n<p>ctx.render(‘’)引用的文件必须放在 app/view/***.html中</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// ejs</span><br><span class=\"line\">async index6 () &#123;</span><br><span class=\"line\">  const &#123; ctx &#125; = this;</span><br><span class=\"line\">  await ctx.render(&#x27;m1.html&#x27;) // ./app/view/*.html</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n<ol start=\"4\">\n<li>语法使用</li>\n</ol>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">传递数据 &lt;%= **%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">循环渲染</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;% for(var i=0; i&lt;canDo.length; i++)&#123;%&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">循环体</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;%&#125;%&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 在第二个参数写上要传递的参数</span><br><span class=\"line\">  // ejs</span><br><span class=\"line\">  async index6 () &#123;</span><br><span class=\"line\">    const &#123; ctx &#125; = this;</span><br><span class=\"line\">    await ctx.render(&#x27;m1.html&#x27;, &#123;</span><br><span class=\"line\">      name: &#x27;jake&#x27;,</span><br><span class=\"line\">      age: 18,</span><br><span class=\"line\">      canDo: [</span><br><span class=\"line\">        &#x27;aaa&#x27;,</span><br><span class=\"line\">        &#x27;bbb&#x27;,</span><br><span class=\"line\">        &#x27;ccc&#x27;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// M1.html</span><br><span class=\"line\">&lt;body&gt;</span><br><span class=\"line\">  &lt;h1&gt;啊啊啊&lt;/h1&gt;</span><br><span class=\"line\">  &lt;h2&gt;姓名： &lt;%= name%&gt;&lt;/h2&gt;</span><br><span class=\"line\">  &lt;h2&gt;年龄： &lt;%= age%&gt;&lt;/h2&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">  &lt;ul&gt;</span><br><span class=\"line\">    &lt;% for(var i=0; i&lt;canDo.length; i++)&#123;%&gt;</span><br><span class=\"line\">      &lt;li&gt;&lt;%= canDo[i] %&gt;&lt;/li&gt;</span><br><span class=\"line\">    &lt;%&#125;%&gt;</span><br><span class=\"line\">  &lt;/ul&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/body&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<blockquote>\n<p>引入公用代码片段</p>\n<p>&lt;%-include(“***.html”) %&gt;</p>\n</blockquote>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;%-include(&quot;header.html&quot;) %&gt;</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p>引入css样式 和 js</p>\n</blockquote>\n<p>1.将 css js 文件定义到 app/public 中 </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在页面文件中正常引入</span><br><span class=\"line\">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;./public/css/a.css&quot;&gt;</span><br><span class=\"line\">&lt;script src=&quot;../public/js/a.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"5-cookie\"><a href=\"#5-cookie\" class=\"headerlink\" title=\"5.cookie\"></a>5.cookie</h2><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qc3BhbmcuY29tL2FydGljbGUvNzkjdG9jMzQ3\">对Cookie的简单了解</span></p>\n<blockquote>\n<p>HTTP请求是无状态的，但是在开发时，有些情况是需要知道请求的人是谁的。为了解决这个问题，HTTP协议设计了一个特殊的请求头：<code>Cookie</code>。服务端可以通过响应头（set-cookie）将少量数据响应给客户端，浏览器会遵循协议将数据保留，并在下一次请求同一个服务的时候带上。</p>\n</blockquote>\n<p>简单来说，就相当于你去上班，给你发了一个工牌，这样你就可以进出办公大楼了。你也可以想象成，你去红浪漫，办了一张VIP卡。每次去拿出卡，可以打9折一样。</p>\n<p><a href=\"https://jspang.com/article/79#toc348\"><strong>编写前基本准备</strong></a></p>\n<p>你初步了解Cookie后，我们来进行实际操作。</p>\n<p>我们先来了解在Egg下，如何实现Cookie的增删改查，这也是最基本的操作。（提示，在实际开发中Cookie的操作应该放在服务端，而不是用客户端的JS操作。）</p>\n<p>在讲解之前，我们还是要作一些提前的代码编写，比如设置好对应的按钮、Controller方法和路由。</p>\n<p>我们先来到上节课的<code>/app/view/jspang.html</code>模板中，编写四个按钮，分别是<code>增加Cookie</code>、<code>删除Cookie</code>、<code>修改Cookie</code>和<code>查看Cookie</code>。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;div&gt;</span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;add()&quot;</span>&gt;</span>增加Cookie<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;del()&quot;</span>&gt;</span>删除Cookie<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;editor()&quot;</span>&gt;</span>修改Cookie<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">    <span class=\"language-xml\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">onclick</span>=<span class=\"string\">&quot;show()&quot;</span>&gt;</span>查看Cookie<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span></span><br><span class=\"line\">&lt;/div&gt;</span><br></pre></td></tr></table></figure>\n\n<p>写完按钮后，增加对应的方法JavaScript。</p>\n<p>可以先写一个方法（function），然后其它的复制后进行修改。就可以快速写出这些代码了。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;script&gt;</span><br><span class=\"line\">    <span class=\"keyword\">function</span> <span class=\"title function_\">add</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        <span class=\"title function_\">fetch</span>(<span class=\"string\">&quot;/add&quot;</span>,&#123;</span><br><span class=\"line\">            <span class=\"attr\">method</span>:<span class=\"string\">&quot;post&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">headers</span>:&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;Content-type&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">function</span> <span class=\"title function_\">del</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        <span class=\"title function_\">fetch</span>(<span class=\"string\">&quot;/del&quot;</span>,&#123;</span><br><span class=\"line\">            <span class=\"attr\">method</span>:<span class=\"string\">&quot;post&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">headers</span>:&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;Content-type&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">function</span> <span class=\"title function_\">editor</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        <span class=\"title function_\">fetch</span>(<span class=\"string\">&quot;/editor&quot;</span>,&#123;</span><br><span class=\"line\">            <span class=\"attr\">method</span>:<span class=\"string\">&quot;post&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">headers</span>:&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;Content-type&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">function</span> <span class=\"title function_\">show</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">        <span class=\"title function_\">fetch</span>(<span class=\"string\">&quot;/show&quot;</span>,&#123;</span><br><span class=\"line\">            <span class=\"attr\">method</span>:<span class=\"string\">&quot;post&quot;</span>,</span><br><span class=\"line\">            <span class=\"attr\">headers</span>:&#123;</span><br><span class=\"line\">                <span class=\"string\">&quot;Content-type&quot;</span>:<span class=\"string\">&quot;application/json&quot;</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&lt;/script&gt;</span><br></pre></td></tr></table></figure>\n\n<p>再去<code>/app/controller/jspang.js</code>文件下，增加这四个对应的方法。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"title function_\">add</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = <span class=\"variable language_\">this</span>.<span class=\"property\">ctx</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"title function_\">del</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = <span class=\"variable language_\">this</span>.<span class=\"property\">ctx</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"title function_\">editor</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = <span class=\"variable language_\">this</span>.<span class=\"property\">ctx</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"title function_\">show</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = <span class=\"variable language_\">this</span>.<span class=\"property\">ctx</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>最后再到<code>/app/router.js</code>中配置对应的路由</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/add&#x27;</span>, controller.<span class=\"property\">jspang</span>.<span class=\"property\">add</span>);</span><br><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/del&#x27;</span>, controller.<span class=\"property\">jspang</span>.<span class=\"property\">del</span>);</span><br><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/editor&#x27;</span>, controller.<span class=\"property\">jspang</span>.<span class=\"property\">editor</span>);</span><br><span class=\"line\">router.<span class=\"title function_\">post</span>(<span class=\"string\">&#x27;/show&#x27;</span>, controller.<span class=\"property\">jspang</span>.<span class=\"property\">show</span>);</span><br></pre></td></tr></table></figure>\n\n<p>作完上面这四步，我们的基本结构就有了，剩下就可以好好的学习Cookie的基本操作了。</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qc3BhbmcuY29tL2FydGljbGUvNzkjdG9jMzQ5\">Cookie的增加操作</span></p>\n<p>先到<code>/app/controller/jspang.js</code>文件的<code>add( )</code>方法里编写代码。其实egg已经为我们准备好了操作Cookie的方法。直接使用就可以了。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"title function_\">add</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = <span class=\"variable language_\">this</span>.<span class=\"property\">ctx</span></span><br><span class=\"line\">  ctx.<span class=\"property\">cookies</span>.<span class=\"title function_\">set</span>(<span class=\"string\">&quot;user&quot;</span>,<span class=\"string\">&quot;jspang.com&quot;</span>)</span><br><span class=\"line\">  ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">status</span>:<span class=\"number\">200</span>,</span><br><span class=\"line\">    <span class=\"attr\">data</span>:<span class=\"string\">&#x27;Cookie添加成功&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这部分代码写完后，就可以可以在终端中开启服务，输入<code>yarn dev</code>开启。</p>\n<p>来到页面点击<code>增加Cookie</code>按钮，然后按<code>F12</code>打开调试模式，找到<code>Application</code>，可以看到<code>Cookie</code>值已经被加入进来了。</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qc3BhbmcuY29tL2FydGljbGUvNzkjdG9jMzUw\">Cookie的删除操作</span></p>\n<p>再来看一下Cookie的删除操作，再来到<code>/app/controller/jspang.js</code>文件。修改<code>del( )</code>方法。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"title function_\">del</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = <span class=\"variable language_\">this</span>.<span class=\"property\">ctx</span></span><br><span class=\"line\">  ctx.<span class=\"property\">cookies</span>.<span class=\"title function_\">set</span>(<span class=\"string\">&quot;user&quot;</span>,<span class=\"literal\">null</span>)</span><br><span class=\"line\">  ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">status</span>:<span class=\"number\">200</span>,</span><br><span class=\"line\">    <span class=\"attr\">data</span>:<span class=\"string\">&#x27;Cookie删除成功&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>写好后，直接到浏览器中点击删除，就可以删除<code>Cookie</code>了。</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qc3BhbmcuY29tL2FydGljbGUvNzkjdG9jMzUx\">Cookie的修改操作</span></p>\n<p>修改操作和删除和增加一样。直接修改值就可以了。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"title function_\">editor</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = <span class=\"variable language_\">this</span>.<span class=\"property\">ctx</span></span><br><span class=\"line\">  ctx.<span class=\"property\">cookies</span>.<span class=\"title function_\">set</span>(<span class=\"string\">&quot;user&quot;</span>,<span class=\"string\">&#x27;bilibili&#x27;</span>)</span><br><span class=\"line\">  ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">status</span>:<span class=\"number\">200</span>,</span><br><span class=\"line\">    <span class=\"attr\">data</span>:<span class=\"string\">&#x27;Cookie修改成功&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qc3BhbmcuY29tL2FydGljbGUvNzkjdG9jMzUy\">Cookie的显示</span></p>\n<p>显示Cookie要使用<code>ctx.cookies.get( )</code>方法。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"title function_\">show</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = <span class=\"variable language_\">this</span>.<span class=\"property\">ctx</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> user=ctx.<span class=\"property\">cookies</span>.<span class=\"title function_\">get</span>(<span class=\"string\">&quot;user&quot;</span>)</span><br><span class=\"line\">  <span class=\"variable language_\">console</span>.<span class=\"title function_\">log</span>(user)</span><br><span class=\"line\">  ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">status</span>:<span class=\"number\">200</span>,</span><br><span class=\"line\">    <span class=\"attr\">data</span>:<span class=\"string\">&#x27;Cookie显示成功&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>点击按钮后，可以在VSCode的终端中显示出结果。你可以试着让它显示在页面上。</p>\n<h2 id=\"6-cookie配置与加密\"><a href=\"#6-cookie配置与加密\" class=\"headerlink\" title=\"6.cookie配置与加密\"></a>6.cookie配置与加密</h2><p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qc3BhbmcuY29tL2FydGljbGUvNzkjdG9jMzU0\">Cookie时效设置</span></p>\n<p><code>ctx.cookies.set( )</code> 方法是有三个参数的，第一个参数是key，第二个参数是value，第三个参数就可以进行配置。比如你需要配置Cookie的有效时间，可以使用<code>maxAge</code>属性。(这个时间是毫秒。)</p>\n<p>比如现在我们到<code>/app/controller/jspang.js</code>文件里，修改<code>add( )</code>方法，把<code>maxAge</code>设置为两秒，在添加Cookie两秒后，这个Cookie就会自己失效。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">async</span> <span class=\"title function_\">add</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = <span class=\"variable language_\">this</span>.<span class=\"property\">ctx</span></span><br><span class=\"line\">  ctx.<span class=\"property\">cookies</span>.<span class=\"title function_\">set</span>(<span class=\"string\">&quot;user&quot;</span>,<span class=\"string\">&quot;jspang.com&quot;</span>,&#123;</span><br><span class=\"line\">    <span class=\"attr\">maxAge</span>:<span class=\"number\">1000</span>*<span class=\"number\">2</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">status</span>:<span class=\"number\">200</span>,</span><br><span class=\"line\">    <span class=\"attr\">data</span>:<span class=\"string\">&#x27;Cookie添加成功&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9qc3BhbmcuY29tL2FydGljbGUvNzkjdG9jMzU1\">HttpOnly的设置</span></p>\n<p>伪造Cookie来绕过登录是黑客经常使用的一种手段，所以为了安全，Egg.js默认设置只允许服务端来操作Cookie。</p>\n<p>比如现在你通过JS的方式<code>document.cookie</code>获取Cookie是不能获取的(需要在浏览器的控制台输入获取)。当我们想通过客户端操作Cookie时，可以通过下面的代码进行设置。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sync <span class=\"title function_\">add</span>(<span class=\"params\"></span>)&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> ctx = <span class=\"variable language_\">this</span>.<span class=\"property\">ctx</span></span><br><span class=\"line\">  ctx.<span class=\"property\">cookies</span>.<span class=\"title function_\">set</span>(<span class=\"string\">&quot;user&quot;</span>,<span class=\"string\">&quot;jspang.com&quot;</span>,&#123;</span><br><span class=\"line\">    <span class=\"attr\">maxAge</span>:<span class=\"number\">1000</span>*<span class=\"number\">60</span>,</span><br><span class=\"line\">    <span class=\"attr\">httpOnly</span>:<span class=\"literal\">false</span></span><br><span class=\"line\">  &#125;)</span><br><span class=\"line\">  ctx.<span class=\"property\">body</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">status</span>:<span class=\"number\">200</span>,</span><br><span class=\"line\">    <span class=\"attr\">data</span>:<span class=\"string\">&#x27;Cookie添加成功&#x27;</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面设置了<code>httpOnly:false</code>，再次刷新页面，然后看浏览器控制台的<code>HttpOnly</code>就变成<code>false</code>属性了。</p>\n<p>中文问题</p>\n<p>加密只要在第三个参数中，加入<code>encrypt:true</code>，就可以加密成功。</p>\n<figure class=\"highlight jsx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ctx.<span class=\"property\">cookies</span>.<span class=\"title function_\">set</span>(<span class=\"string\">&quot;user&quot;</span>,<span class=\"string\">&quot;技术胖&quot;</span>,&#123;</span><br><span class=\"line\">  <span class=\"attr\">encrypt</span>:<span class=\"literal\">true</span></span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n",
            "tags": [
                "egg.js"
            ]
        },
        {
            "id": "http://example.com/2023/08/21/egg-js%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%AE%89%E8%A3%85/",
            "url": "http://example.com/2023/08/21/egg-js%E4%BB%8B%E7%BB%8D%E4%B8%8E%E5%AE%89%E8%A3%85/",
            "title": "egg.js介绍与安装",
            "date_published": "2023-08-21T03:51:24.000Z",
            "content_html": "<h1 id=\"egg-js\"><a href=\"#egg-js\" class=\"headerlink\" title=\"egg.js\"></a>egg.js</h1><a id=\"more\"></a>\n\n<h2 id=\"1-egg-是什么？\"><a href=\"#1-egg-是什么？\" class=\"headerlink\" title=\"1.egg 是什么？\"></a>1.egg 是什么？</h2><p>egg 是阿里出品的一款 node.js 后端 企业级 web 基础框架，基于 koa 封装，并做了一些约定。</p>\n<h2 id=\"2-安装\"><a href=\"#2-安装\" class=\"headerlink\" title=\"2.安装\"></a>2.安装</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm init egg --type=simple //安装</span><br><span class=\"line\"></span><br><span class=\"line\">npm i //安装依赖</span><br><span class=\"line\"></span><br><span class=\"line\">npm run dev // 运行调试</span><br><span class=\"line\"></span><br><span class=\"line\">http://localhost:7001 // 地址</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"3-目录结构\"><a href=\"#3-目录结构\" class=\"headerlink\" title=\"3.目录结构\"></a>3.目录结构</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">egg-project</span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── app.js (可选)</span><br><span class=\"line\">├── agent.js (可选)</span><br><span class=\"line\">├── app</span><br><span class=\"line\">|   ├── router.js</span><br><span class=\"line\">│   ├── controller</span><br><span class=\"line\">│   |   └── home.js</span><br><span class=\"line\">│   ├── service (可选)</span><br><span class=\"line\">│   |   └── user.js</span><br><span class=\"line\">│   ├── middleware (可选)</span><br><span class=\"line\">│   |   └── response_time.js</span><br><span class=\"line\">│   ├── schedule (可选)</span><br><span class=\"line\">│   |   └── my_task.js</span><br><span class=\"line\">│   ├── public (可选)</span><br><span class=\"line\">│   |   └── reset.css</span><br><span class=\"line\">│   ├── view (可选)</span><br><span class=\"line\">│   |   └── home.tpl</span><br><span class=\"line\">│   └── extend (可选)</span><br><span class=\"line\">│       ├── helper.js (可选)</span><br><span class=\"line\">│       ├── request.js (可选)</span><br><span class=\"line\">│       ├── response.js (可选)</span><br><span class=\"line\">│       ├── context.js (可选)</span><br><span class=\"line\">│       ├── application.js (可选)</span><br><span class=\"line\">│       └── agent.js (可选)</span><br><span class=\"line\">├── config</span><br><span class=\"line\">|   ├── plugin.js</span><br><span class=\"line\">|   ├── config.default.js</span><br><span class=\"line\">│   ├── config.prod.js</span><br><span class=\"line\">|   ├── config.test.js (可选)</span><br><span class=\"line\">|   ├── config.local.js (可选)</span><br><span class=\"line\">|   └── config.unittest.js (可选)</span><br><span class=\"line\">└── <span class=\"built_in\">test</span></span><br><span class=\"line\">    ├── middleware</span><br><span class=\"line\">    |   └── response_time.test.js</span><br><span class=\"line\">    └── controller</span><br><span class=\"line\">        └── home.test.js</span><br></pre></td></tr></table></figure>\n\n<p>如上，由框架约定的目录：</p>\n<ul>\n<li><code>app/router.js</code> 用于配置 URL 路由规则，具体参见 <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2Jhc2ljcy9yb3V0ZXI=\">Router</span>。</li>\n<li><code>app/controller/**</code> 用于解析用户的输入，处理后返回相应的结果，具体参见 <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2Jhc2ljcy9jb250cm9sbGVy\">Controller</span>。</li>\n<li><code>app/service/**</code> 用于编写业务逻辑层，可选，建议使用，具体参见 <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2Jhc2ljcy9zZXJ2aWNl\">Service</span>。</li>\n<li><code>app/middleware/**</code> 用于编写中间件，可选，具体参见 <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2Jhc2ljcy9taWRkbGV3YXJl\">Middleware</span>。</li>\n<li><code>app/public/**</code> 用于放置静态资源，可选，具体参见内置插件 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2VnZ2pzL2VnZy1zdGF0aWM=\">egg-static</span>。</li>\n<li><code>app/extend/**</code> 用于框架的扩展，可选，具体参见<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2Jhc2ljcy9leHRlbmQ=\">框架扩展</span>。</li>\n<li><code>config/config.&#123;env&#125;.js</code> 用于编写配置文件，具体参见<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2Jhc2ljcy9jb25maWc=\">配置</span>。</li>\n<li><code>config/plugin.js</code> 用于配置需要加载的插件，具体参见<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2Jhc2ljcy9wbHVnaW4=\">插件</span>。</li>\n<li><code>test/**</code> 用于单元测试，具体参见<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2NvcmUvdW5pdHRlc3Q=\">单元测试</span>。</li>\n<li><code>app.js</code> 和 <code>agent.js</code> 用于自定义启动时的初始化工作，可选，具体参见<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2Jhc2ljcy9hcHAtc3RhcnQ=\">启动自定义</span>。关于<code>agent.js</code>的作用参见<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2NvcmUvY2x1c3Rlci1hbmQtaXBjI2FnZW50LSVFNiU5QyVCQSVFNSU4OCVCNg==\">Agent 机制</span>。</li>\n</ul>\n<p>由内置插件约定的目录：</p>\n<ul>\n<li><code>app/public/**</code> 用于放置静态资源，可选，具体参见内置插件 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2VnZ2pzL2VnZy1zdGF0aWM=\">egg-static</span>。</li>\n<li><code>app/schedule/**</code> 用于定时任务，可选，具体参见<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2Jhc2ljcy9zY2hlZHVsZQ==\">定时任务</span>。</li>\n</ul>\n<p><strong>若需自定义自己的目录规范，参见 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9lZ2dqcy5vcmcvemgtY24vYWR2YW5jZWQvbG9hZGVyLmh0bWw=\">Loader API</span></strong></p>\n<ul>\n<li><code>app/view/**</code> 用于放置模板文件，可选，由模板插件约定，具体参见<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZWdnanMub3JnL3poLUNOL2NvcmUvdmlldw==\">模板渲染</span>。</li>\n<li><code>app/model/**</code> 用于放置领域模型，可选，由领域类相关插件约定，如 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2VnZ2pzL2VnZy1zZXF1ZWxpemU=\">egg-sequelize</span>。</li>\n</ul>\n",
            "tags": [
                "egg.js"
            ]
        }
    ]
}